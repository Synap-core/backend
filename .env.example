# Synap Backend - Environment Variables Template
# Copy this file to .env and fill in your values

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================

# Local Development (default from docker-compose.yml)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/synap

# Individual connection params (alternative to DATABASE_URL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=synap
DB_USER=postgres
DB_PASSWORD=postgres
DB_POOL_SIZE=20

# =============================================================================
# AI / EMBEDDINGS
# =============================================================================

# OpenAI API Key (required for embeddings and AI analysis)
# Get yours at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Optional: Anthropic for Claude (if using alternative LLM)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Embedding Model (default: text-embedding-3-small)
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# =============================================================================
# REDIS (Caching & Sessions)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379

# =============================================================================
# STORAGE (MinIO / S3)
# =============================================================================

# MinIO (local development)
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=synap-local
MINIO_USE_SSL=false

# Cloudflare R2 (production - optional)
R2_ACCOUNT_ID=your-r2-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_BUCKET=synap-production

# =============================================================================
# AUTHENTICATION (Ory Stack)
# =============================================================================

# Ory Kratos (Identity Management)
KRATOS_PUBLIC_URL=http://localhost:4433
KRATOS_ADMIN_URL=http://localhost:4434

# Ory Hydra (OAuth2 / OpenID Connect)
HYDRA_PUBLIC_URL=http://localhost:4444
HYDRA_ADMIN_URL=http://localhost:4445

# OAuth Providers (optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# =============================================================================
# APPLICATION
# =============================================================================

# Environment
NODE_ENV=development

# API Server
API_PORT=3000
API_HOST=0.0.0.0
API_URL=http://localhost:3000

# Admin UI
ADMIN_UI_PORT=5180
ADMIN_UI_URL=http://localhost:5180

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5180,http://localhost:5173

# =============================================================================
# INNGEST (Background Jobs)
# =============================================================================

INNGEST_EVENT_KEY=local_development_key
INNGEST_SIGNING_KEY=local_signing_key
INNGEST_DEV_SERVER_URL=http://localhost:8288

# =============================================================================
# AUTOMATION INTEGRATIONS (N8N, LangFlow)
# =============================================================================

# N8N Webhook (Optional - Auto-subscribes to all entity events)
# Get this from your N8N workflow webhook trigger
# Example: https://yourinstance.app.n8n.cloud/webhook/synap-events
N8N_WEBHOOK_URL=

# N8N Event Types (comma-separated, defaults to all entity events if empty)
N8N_EVENT_TYPES=entities.create.validated,entities.update.validated,entities.delete.validated

# N8N Webhook Secret (for HMAC signature verification)
N8N_WEBHOOK_SECRET=

# LangFlow Instance (Optional - For AI agent workflows)
# Example: https://yourlangflow.instance.com or http://localhost:7860
LANGFLOW_URL=
LANGFLOW_API_KEY=

# =============================================================================
# LOGGING
# =============================================================================

LOG_LEVEL=debug
LOG_PRETTY=true

# =============================================================================
# TESTING (see .env.test for test-specific values)
# =============================================================================

# Tests will use .env.test if present, otherwise these defaults
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/synap_test
